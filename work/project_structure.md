# هيكل ومسارات المشروع (Project Structure & Routes)

يوضح هذا الملف الهيكل العام للمجلدات والملفات في المشروع، بالإضافة إلى المسارات الرئيسية وكيفية تنظيمها.

---

## 1. هيكل المجلدات والملفات

يتبع المشروع هيكلًا معياريًا لتطبيقات Next.js باستخدام App Router.

```
.
├── public/                 # الملفات العامة (صور، أيقونات)
├── src/
│   ├── app/                # المجلد الرئيسي للتطبيق (App Router)
│   │   ├── (dashboard)/    # مجموعة مسارات لوحة التحكم (تشارك نفس التخطيط)
│   │   │   ├── layout.tsx  # التخطيط المشترك للوحة التحكم (مع الشريط الجانبي)
│   │   │   ├── page.tsx    # الصفحة الرئيسية للوحة التحكم (/)
│   │   │   ├── patients/
│   │   │   │   ├── page.tsx            # صفحة قائمة المرضى (/patients)
│   │   │   │   └── [patientId]/
│   │   │   │       └── page.tsx        # صفحة تفاصيل المريض الديناميكية (/patients/[patientId])
│   │   │   ├── financials/page.tsx # صفحة المالية (/financials)
│   │   │   ├── reports/page.tsx    # صفحة التقارير (/reports)
│   │   │   └── ... (باقي صفحات لوحة التحكم)
│   │   │
│   │   ├── rooms/
│   │   │   └── [roomId]/
│   │   │       └── page.tsx        # صفحة الغرفة المستقلة (/rooms/[roomId])
│   │   │
│   │   ├── waiting-room/
│   │   │   └── page.tsx      # صفحة شاشة الانتظار (/waiting-room)
│   │   │
│   │   ├── login/
│   │   │   └── page.tsx      # صفحة تسجيل الدخول (/login)
│   │   │
│   │   ├── globals.css     # الأنماط العامة و متغيرات CSS
│   │   └── layout.tsx        # التخطيط الجذري للتطبيق (Root Layout)
│   │
│   ├── components/           # مكونات React القابلة لإعادة الاستخدام
│   │   ├── ui/               # مكونات UI من ShadCN (Button, Card, etc.)
│   │   ├── dashboard/        # مكونات خاصة بلوحة التحكم (PatientCard, ClinicRooms, etc.)
│   │   ├── app-provider.tsx  # مزود الحالة المركزي (React Context)
│   │   └── ...
│   │
│   ├── lib/                  # الوحدات المساعدة والأدوات
│   │   ├── data.ts           # البيانات المدمجة (Mock Data)
│   │   ├── types.ts          # تعريفات TypeScript للبيانات
│   │   └── utils.ts          # دوال مساعدة (مثل cn لدمج الكلاسات)
│   │
│   └── ai/                   # كل ما يتعلق بالذكاء الاصطناعي (Genkit)
│       ├── genkit.ts         # تهيئة Genkit
│       ├── dev.ts            # ملف تشغيل Genkit في وضع التطوير
│       └── flows/            # مجلد يحتوي على تدفقات Genkit
│           └── announce-next-patient.ts # التدفق الخاص بالنداء الصوتي
│
├── .env                    # متغيرات البيئة (API keys, etc.)
├── next.config.ts          # إعدادات Next.js
├── tailwind.config.ts      # إعدادات Tailwind CSS
└── tsconfig.json           # إعدادات TypeScript
```

---

## 2. المسارات الرئيسية (Main Routes)

- **`/`**: المسار الجذر، يعرض **لوحة التحكم الرئيسية** (`src/app/(dashboard)/page.tsx`).
- **`/login`**: صفحة تسجيل الدخول إلى النظام.
- **`/patients`**: صفحة عرض وإدارة جميع **سجلات المرضى**.
- **`/patients/[patientId]`**: صفحة ديناميكية تعرض **الملف التفصيلي** لمريض معين.
- **`/financials`**: صفحة **الإدارة المالية** (قيد الإنشاء).
- **`/reports`**: صفحة **التقارير** (قيد الإنشاء).
- **`/settings`**: صفحة **الإعدادات** (قيد الإنشاء).
- **`/waiting-room`**: **شاشة الانتظار** المخصصة للعرض للمرضى. تعمل كصفحة مستقلة.
- **`/rooms/[roomId]`**: صفحة ديناميكية ومستقلة خاصة بكل **غرفة علاج**، يستخدمها الطبيب.

---

## 3. شرح مفاهيم الهيكلة

- **`App Router`**: يعتمد المشروع على نظام التوجيه الجديد في Next.js، حيث يتم تعريف المسارات عن طريق المجلدات، وكل مجلد يحتوي على ملف `page.tsx` ليمثل واجهة المسار.
- **`Route Groups ((dashboard))`**: يتم استخدام مجموعات المسارات لتنظيم الصفحات التي تشترك في نفس التخطيط (layout) دون التأثير على عنوان URL. كل الصفحات داخل مجلد `(dashboard)` تستخدم الشريط الجانبي والقائمة العلوية من `(dashboard)/layout.tsx`.
- **`Layouts`**: ملف `layout.tsx` يستخدم لإنشاء واجهة مستخدم مشتركة بين عدة صفحات. على سبيل المثال، `(dashboard)/layout.tsx` يوفر الشريط الجانبي لكل صفحات لوحة التحكم.
- **المكونات المستقلة (`/rooms`, `/waiting-room`)**: تم وضع هذه المسارات خارج مجلد `(dashboard)` عن قصد لكي لا ترث التخطيط الخاص بلوحة التحكم، مما يسمح بعرضها كصفحات مستقلة بملء الشاشة.
